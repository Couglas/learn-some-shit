# 数据库中间件

- MyCat

  作为一个数据库中间件，面对应用程序，它根据哥哥数据库的通信协议，从二进制请求中根据协议进行解码，然后提取SQL，根据配置的分库分表、读写分离规则计算出需要发送到那个物理数据库。然后，根据通信协议将SQL封装成二进制流，发送到真实的物理资源，最后将结果层层返回到应用程序

  解码请求存在性能损耗，高度中心化，适配性差

- ShardingJDBC/ShardingSephere

  实现JDBC协议，面向Datasource、Connection、ResultSet等对象编程，以jar包的方式嵌入业务系统，其根据分库分表的配置信息，初始化ShardingJdbcDataSource对象，解析SQL语句 提取分库分表字段值，根据配置的路由规则选择正确的库，最后使用各种数据库的驱动包将SQL发送真正的物理库

  无性能损耗，基于JDBC无缝支持各主流库，没有统一视图，需要自己计算数据属于哪个表哪个库，然后去对应库执行SQL语句。为此官方提供了ShardingSephere，基于代理模式，作为数据库的代理层，提供统一的数据聚合层

# 缓存中间件

## 本地缓存

- Guava Cache
- Caffeine

区别不大，都包含以下功能。

1. 支持大容量：采用内存+磁盘两级存储，内存存放热数据，磁盘存全量
2. 过期、淘汰机制
3. 基本的数据统计功能：缓存命中率、内存空间使用情况、磁盘空间使用情况

对单体应用友好，分布式应用则浪费资源，存了多份

## 分布式缓存中间件

- Redis：支持丰富的数据类型，持久化AOF、RDB，分布式支持主从和集群，单线程命令执行（不适合大Value存储）
- Memcached：支持简单数据类型，不支持持久化，不支持集群，多线程模型，充分利用多核CPU

客户端采用一致性哈希进行负载均衡，提高节点扩容、缩容时的命中率，redis采用主从同步模式，提高可靠性，采用集群部署，引入哨兵集群

# 全文索引中间件





























































